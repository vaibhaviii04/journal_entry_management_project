<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(to right, #2d2821, #8f7455);
    overflow: hidden;
}

/* ===================== Dashboard Layout ===================== */
.dashboard-container {
    width: 100%;
    height: 100vh;
    display: flex;
    flex-direction: row;
    position: relative;
    z-index: 1;
}

.left-sidebar {
    width: 200px;
    background: rgba(255,255,255,0.05);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 10px;
    color: #f7f3ee;
    border-right: 1px solid rgba(255,255,255,0.1);
    z-index: 1;
}

.left-sidebar h3 { margin-top: 0; font-size: 16px; text-align: center; }
.quote { font-size: 14px; font-style: italic; margin: 20px 0; text-align: center; }
.mini-stats { margin-top: 30px; text-align: center; }
.mini-stats p { margin: 5px 0; font-size: 14px; }

/* ===================== Mood Tracker ===================== */
.mood-tracker {
    margin-top: 30px;
    text-align: center;
}

.mood-tracker p {
    font-size: 14px;
    margin: 8px 0;
    color: #f7f3ee;
}

.mood-tracker select {
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid #debba1;
    background: #f7f3ee;
    color: #4e3b2c;
    font-size: 14px;
    outline: none;
    transition: all 0.3s ease;
}

.mood-tracker select:hover {
    background: #e8e2d8;
}

/* ===================== Main Content ===================== */
.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    position: relative;
    padding-top: 100px;
}

/* Remove any black background */
.main-content-wrapper {
    background: transparent !important;
}

/* ===================== Welcome Text ===================== */
.welcome-text {
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 30px;
    font-weight: 600;
    color: #f7f3ee;
    text-shadow: 1px 1px 4px #2d2821;
    z-index: 3;
    text-align: center;
}

/* ===================== Search Bar ===================== */
.search-bar-container {
    margin-top: 100px;
    text-align: center;
    width: 45%;
    background: transparent;
}

.search-bar-container form {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    background: transparent;
}

.search-bar-container input[type="text"] {
    width: 65%;
    padding: 10px 14px;
    border-radius: 6px;
    border: 1px solid #debba1;
    font-size: 14px;
    outline: none;
    background: #f7f3ee;
    color: #4e3b2c;
    transition: all 0.3s ease;
}

.search-bar-container input[type="text"]:focus {
    border-color: #e8d8b8;
}

.search-bar-container button {
    padding: 10px 14px;
    border-radius: 6px;
    border: 1px solid #debba1;
    background: #f7f3ee;
    color: #4e3b2c;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.search-bar-container button:hover {
    background: #e8e2d8;
}

/* ===================== Top-right options ===================== */
.top-right-options {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    z-index: 2;
}

.top-right-options a {
    display: inline-block;
    padding: 8px 14px;
    font-size: 15px;
    border-radius: 8px;
    border: 1px solid #debba1;
    background: #f7f3ee;
    color: #4e3b2c;
    text-decoration: none;
    text-align: center;
    transition: all 0.2s ease;
}

.top-right-options a:hover {
    transform: scale(1.1);
    background: #e8e2d8;
}

/* ===================== Add Entry Button ===================== */
.main-action {
    position: absolute;
    top: 55%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.main-action a.button-add {
    padding: 20px 45px;
    font-size: 26px;
    border-radius: 12px;
    border: 1px solid #debba1;
    background: #f7f3ee;
    color: #4e3b2c;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.2s ease;
}

.main-action a.button-add:hover {
    transform: scale(1.05);
    background: #e8e2d8;
}

/* ===================== Logout Button (shifted bottom-right) ===================== */
.bottom-right-logout {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 999; /* always on top */
}

.bottom-right-logout form {
    margin: 0;
}

.bottom-right-logout form button {
    display: inline-block;
    padding: 8px 14px;
    font-size: 15px;
    border-radius: 8px;
    border: 1px solid #debba1;
    background: #f7f3ee;
    color: #4e3b2c;
    cursor: pointer;
    text-align: center;
    width: fit-content;
    transition: all 0.2s ease;
}

.bottom-right-logout form button:hover {
    background: #e8e2d8;
    transform: scale(1.1);
}

.bottom-right-logout form button:active {
    transform: scale(0.95);
}
</style>
</head>
<body>

<div class="dashboard-container">
  <div class="left-sidebar">
    <h3>‚ú® Today</h3>
    <div class="quote">"Write your heart out! üíõ"</div>
    <div class="mini-stats">
      <p>üìñ Entries: 12</p>
      <p>‚è∞ Reminders: 3</p>
      <p>‚≠ê Streak: 5 days</p>
    </div>

    <!-- Mood Tracker -->
    <div class="mood-tracker">
        <p>How's your day today?</p>
        <select id="mood-select" onchange="setMood()">
            <option value="">Select Mood</option>
            <option value="‚ö° Excited">Excited ‚ö°</option>
            <option value="üåø Calm">Calm üåø</option>
            <option value="ü™û Reflective">Reflective ü™û</option>
            <option value="üî• Frustrated">Frustrated üî•</option>
        </select>
        <p id="selected-mood"></p>
    </div>
  </div>

  <div class="main-content">
    <div class="main-content-wrapper">
      <div class="top-right-options">
        <a href="{{ url_for('view_journal', username=username) }}">üìñ View Entries</a>
        <a href="{{ url_for('settings', username=username) }}">‚öôÔ∏è Settings</a>
        <a href="{{ url_for('reminders', username=username) }}">‚è∞ Reminders</a>
        <a href="{{ url_for('profile', username=username) }}">üë§ Profile</a>
        <a href="{{ url_for('notifications', username=username) }}">üîî Notifications</a>
        <a href="{{ url_for('calendar', username=username) }}">üìÖ Calendar</a>
      </div>

      <div class="welcome-text" id="welcome-text"></div>

      <div class="search-bar-container">
        <form action="{{ url_for('search_journal', username=username) }}" method="GET">
          <input type="text" name="query" placeholder="Search your journal..." required>
          <button type="submit">üîç</button>
        </form>
      </div>
    </div>

    <div class="main-action">
      <a href="{{ url_for('add_journal_page', username=username) }}" class="button-add">‚ûï Add Entry ‚úçÔ∏è</a>
    </div>

    <div class="bottom-right-logout">
      <form action="{{ url_for('logout') }}" method="POST">
        <button type="submit">üö™ Logout</button>
      </form>
    </div>
  </div>
</div>

<script>
  const now = new Date();
  const hour = now.getHours();
  let greeting, emoji;

  if(hour >= 5 && hour < 12) {
      greeting = "Good morning";
      emoji = "üåû";
  } else if(hour >= 12 && hour < 17) {
      greeting = "Good afternoon";
      emoji = "üå§Ô∏è";
  } else if(hour >= 17 && hour < 21) {
      greeting = "Good evening";
      emoji = "üåá";
  } else {
      greeting = "Good night";
      emoji = "üåô";
  }

  const username = "{{ username }}";
  document.getElementById("welcome-text").innerText = `${emoji} ${greeting}, ${username}! ${emoji}`;

  function setMood() {
      const moodSelect = document.getElementById("mood-select");
      const selectedMood = moodSelect.value;
      document.getElementById("selected-mood").innerText = selectedMood ? `Your mood today: ${selectedMood}` : '';
  }
</script>

</body>
</html>